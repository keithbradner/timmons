<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Timmons Collection - Exhibition</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/src/entry.css">
</head>
<body>

    <div class="overlay"></div>
    <div class="grain"></div>

    <button id="global-back-btn" class="global-back-btn hidden" onclick="handleBack()">&larr; Back</button>

    <div id="ui-layer">

        <div class="hud-top">
            <div id="mode-indicator" class="status-text">EXHIBIT READY</div>
        </div>

        <!-- Entry Selection Screen -->
        <div id="panel-entry" class="panel entry-panel">
            <div class="entry-header">
                <h1 class="entry-title">Coshocton Photography<br><span class="entry-subtitle">Innovation & Artistry</span></h1>
                <p class="entry-description">Explore the intersection of technical invention and artistic mastery in early 20th century photography.</p>
            </div>

            <div class="entry-options">
                <a href="/darkroom.html" class="entry-option">
                    <div class="option-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M3 9h18M9 21V9"/>
                        </svg>
                    </div>
                    <div class="option-content">
                        <h2>The Darkroom</h2>
                        <p>Experience Dever Timmons' revolutionary inspection development technique</p>
                    </div>
                    <div class="option-arrow">&rarr;</div>
                </a>

                <button class="entry-option" onclick="enterPatents()">
                    <div class="option-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                            <polyline points="10 9 9 9 8 9"/>
                        </svg>
                    </div>
                    <div class="option-content">
                        <h2>Patent Gallery</h2>
                        <p>Walter B. Moore's innovations in film developing equipment</p>
                    </div>
                    <div class="option-arrow">&rarr;</div>
                </button>
            </div>

            <div class="entry-footer">
                <span>Touch to Select</span>
            </div>
        </div>

        <!-- Patents Gallery -->
        <div id="panel-patents" class="panel patents-panel hidden">
            <div class="patents-header">
                <h1>Walter B. Moore</h1>
                <p class="patents-subtitle">Film Developing Equipment Patents</p>
                <p class="patents-location">Coshocton, Ohio</p>
            </div>

            <div class="patents-list">
                <button class="patent-item" onclick="viewPatent(0)">
                    <div class="patent-number">US 2,226,438</div>
                    <div class="patent-title">Film-Developing Tank</div>
                    <div class="patent-year">1940</div>
                </button>

                <button class="patent-item" onclick="viewPatent(1)">
                    <div class="patent-number">US 2,327,733</div>
                    <div class="patent-title">Film Developing Tank</div>
                    <div class="patent-year">1943</div>
                </button>

                <button class="patent-item" onclick="viewPatent(2)">
                    <div class="patent-number">US 2,365,485</div>
                    <div class="patent-title">Film Developing Rack</div>
                    <div class="patent-year">1944</div>
                </button>
            </div>
        </div>

        <!-- Patent Detail View -->
        <div id="panel-patent-detail" class="panel patent-detail-panel hidden">
            <div class="patent-detail-header">
                <div class="patent-detail-badge" id="patent-detail-number">US 2,226,438</div>
            </div>

            <div class="patent-detail-content">
                <h1 id="patent-detail-title">Patent Title</h1>
                <div class="patent-meta">
                    <span>Published <span id="patent-detail-year">1940</span></span>
                    <span class="meta-separator">|</span>
                    <span>Filed <span id="patent-detail-filed">May 28, 1938</span></span>
                </div>
                <div class="patent-inventor">
                    <span>Inventor: Walter B. Moore, Coshocton, Ohio</span>
                </div>

                <div class="patent-description">
                    <h2>Abstract</h2>
                    <p id="patent-detail-description">Patent description will appear here.</p>
                </div>

                <div class="patent-document-section">
                    <h2>Patent Document</h2>
                    <div class="patent-iframe-container">
                        <iframe id="patent-pdf-iframe" src="" title="Patent Document"></iframe>
                    </div>
                    <div class="patent-external-link">
                        <a id="patent-google-link" href="#" target="_blank" rel="noopener noreferrer">
                            Also available on Google Patents &rarr;
                        </a>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Patent data for Walter B. Moore (Coshocton, Ohio)
        const PATENTS = [
            {
                number: 'US 2,226,438',
                patentId: 'US2226438A',
                patentNum: '2226438',
                title: 'Film-Developing Tank',
                year: '1940',
                filed: 'May 28, 1938',
                description: 'A transparent tank design allowing observation of film development progress. Features a helical screw circulation system that pumps developer from bottom to top, preventing air bubble accumulation on film surfaces. Includes spring-operated timing device and light-tight cover for use in illuminated rooms.',
                pdfUrl: '/patents/US2226438.pdf'
            },
            {
                number: 'US 2,327,733',
                patentId: 'US2327733A',
                patentNum: '2327733',
                title: 'Film Developing Tank',
                year: '1943',
                filed: 'December 14, 1939',
                description: 'An advanced developing unit with interconnected tanks maintaining consistent temperature via water jacket. Developer liquid flows downward through spaced inlet ports for uniform film exposure. System includes five nested tanks for washing, developing, rinsing, fixing, and final washing. Reduced developing time by 25-33%.',
                pdfUrl: '/patents/US2327733.pdf'
            },
            {
                number: 'US 2,365,485',
                patentId: 'US2365485A',
                patentNum: '2365485',
                title: 'Film Developing Rack',
                year: '1944',
                filed: 'June 21, 1943',
                description: 'A portable rack system for suspending roll film, film packs, and cut film in spaced arrangement during chemical processing. Features rectangular frame with notched pins and spring-latch retention. Enables quick transfer between multiple processing tanks while ensuring uniform chemical distribution.',
                pdfUrl: '/patents/US2365485.pdf'
            }
        ];

        const modeText = document.getElementById('mode-indicator');
        const globalBackBtn = document.getElementById('global-back-btn');
        const panelEntry = document.getElementById('panel-entry');
        const panelPatents = document.getElementById('panel-patents');
        const panelPatentDetail = document.getElementById('panel-patent-detail');

        // Track current view for back button
        let currentView = 'entry';

        function updateBackButton() {
            if (currentView === 'entry') {
                globalBackBtn.classList.add('hidden');
            } else {
                globalBackBtn.classList.remove('hidden');
            }
        }

        function handleBack() {
            if (currentView === 'patent-detail') {
                returnToPatents();
            } else if (currentView === 'patents') {
                returnToEntry();
            }
        }

        function enterPatents() {
            panelEntry.classList.add('hidden');
            panelPatents.classList.remove('hidden');
            modeText.innerText = "PATENT GALLERY";
            currentView = 'patents';
            updateBackButton();
        }

        function returnToEntry() {
            panelPatents.classList.add('hidden');
            panelPatentDetail.classList.add('hidden');
            panelEntry.classList.remove('hidden');
            modeText.innerText = "EXHIBIT READY";
            currentView = 'entry';
            updateBackButton();
        }

        function viewPatent(index) {
            const patent = PATENTS[index];
            if (!patent) return;

            // Update detail view content
            document.getElementById('patent-detail-number').innerText = patent.number;
            document.getElementById('patent-detail-title').innerText = patent.title;
            document.getElementById('patent-detail-year').innerText = patent.year;
            document.getElementById('patent-detail-filed').innerText = patent.filed;
            document.getElementById('patent-detail-description').innerText = patent.description;

            // Set up Google Patents link
            const googlePatentsUrl = `https://patents.google.com/patent/${patent.patentId}`;
            document.getElementById('patent-google-link').href = googlePatentsUrl;

            // Load PDF in iframe
            document.getElementById('patent-pdf-iframe').src = patent.pdfUrl;

            panelPatents.classList.add('hidden');
            panelPatentDetail.classList.remove('hidden');
            modeText.innerText = patent.number;
            currentView = 'patent-detail';
            updateBackButton();
        }

        function returnToPatents() {
            // Clear iframe to stop loading/free resources
            document.getElementById('patent-pdf-iframe').src = '';

            panelPatentDetail.classList.add('hidden');
            panelPatents.classList.remove('hidden');
            modeText.innerText = "PATENT GALLERY";
            currentView = 'patents';
            updateBackButton();
        }
    </script>
</body>
</html>
